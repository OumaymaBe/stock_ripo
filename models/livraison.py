# -*- coding: utf-8 -*-

from odoo import models, fields, api ,_


class livraison(models.Model):
    _name = 'livraison.gestion__inventaire'
    _description = 'Livraison'

    name = fields.Char(string='Référence    ',required=True)
    responsable = fields.Char(string='Responsable   ',required=True)
    demande_initial = fields.Char(string='Demande initial   ')
    qteRecu = fields.Char(string='Quantité Recu   ')

    date_prevue = fields.Date(string='Date prévue   ')
    client = fields.Char(string='Client   ')
    # client = fields.Many2one('res.partner', string='Client')
    # client = fields.Many2one('res.partner', readonly=True, tracking=True,
    #     check_company=True,
    #     string='Partner', change_default=True)
    article = fields.Many2many('article.gestion__inventaire', string='Article')
    emplacement = fields.Char(string='Emplacement   ')
    state = fields.Selection([('draft', 'entrer'),
                            ('inprogress', 'reception'),
                            ('done', 'Terminé'),
                            ('refus', 'Annulé'),
                            ], required=False
                            , default="draft"
                            , string='state')

    def action_star(self):
        for rec in self:
            rec.state = 'inprogress'
    def action_broui(self):
        for rec in self:
            rec.state = 'draft'
    def action_trem(self):
        for rec in self:
            rec.state = 'done'
    def action_anuuler(self):
        for rec in self:
            rec.state = 'refus'
    @api.depends('article')
    def add_art(self):
        for rec in self:
            for art in rec.article:
                # self.write({art.poids_net:(6, 0, [1,2])}) 
                art.poids_net = (6, 0, [1,2])
            # rec.article=[(1 ,atrs ,{} )]
        # self.write({"article":[(5 ,4 ,5 )]})        

    # def default_get(self):
    #     arts=[(11)]
    #     self.write({"article":[(11,0,0,0,0,0,0,0,0,0,0,0,arts)]})        

    def print_livraison(self):
            livraisons = self.env['livraison.gestion__inventaire'].search_read([])
            data={
                'form' : self.read()[0],
                'livraisons' : livraisons
            }
            return self.env.ref('gestion__inventaire.print_livraison').report_action(self, data=data) 

# class client(models.Model):
#     _inherit = 'hr.employee'